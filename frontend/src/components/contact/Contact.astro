---
import Email from "../../assets/svg/Email.astro"
import X from "../../assets/svg/X.astro"
import Linkedin from "../../assets/svg/Linkedin.astro"
import Github from "../../assets/svg/Github.astro"
---

<section class='contactPopUp'>
  <!-- Borders -->
  <div class='separator1' />
  <div class='separator2' />
  <div class='separator3' />
  <div class='diagonal1Up' />
  <div class='diagonal2Up' />
  <div class='lineUp' />

  <!-- Content -->

  <h2>Feel Free to Reach Out</h2>
  <div class='iconsContyainer'>
    <div class='item email'>
      <a href='mailto:design.mallet@gmail.com'>
        <Email />
      </a>
      <p id="emailToCopy" class="nocopied">design.mallet@gmail.com</p>
    </div>
    <div class='item twitter'>
      <a href='https://twitter.com/JonatanRMC/' target='_blank' rel='noopener noreferrer'>
        <X />
      </a>
    </div>
    <div class='item linkedin'>
      <a href='https://www.linkedin.com/in/jonatan-mazo/' target='_blank' rel='noopener noreferrer'>
        <Linkedin />
      </a>
    </div>
    <div class='item github'>
      <a href='https://github.com/MAZTRO' target='_blank' rel='noopener noreferrer'>
        <Github />
      </a>
    </div>
  </div>
</section>

<script>
  const emailtoCopy = document.getElementById('emailToCopy')
  emailtoCopy.addEventListener('click', () => {
    navigator.clipboard.writeText(emailtoCopy.innerText)
    emailtoCopy.classList.remove('nocopied')
    emailtoCopy.classList.add('copied')
    setTimeout(() => {
      emailtoCopy.classList.remove('copied')
      emailtoCopy.classList.add('nocopied')
    }, 1500);
  })
</script>

<style>
  .contactPopUp {
    position: absolute;
    bottom: 1%;
    left: 50%;

    min-width: max-content;

    margin: auto;
    padding: 5px 20px;

    display: flex;
    flex-flow: column;
    justify-content: center;

    transform: translate(-50%, 0%);

    border-radius: 5px;
    background-color: var(--color-white);
    border: 1px solid var(--color-black);
    transition: 100ms 100ms ease-in;

    z-index: 20;
  }

  .contactPopUp::before {
    content: '';
    position: absolute;
    top: 2px;
    right: 2px;
    width: 0px;
    height: 0px;
    background-color: var(--color-black);
    border-radius: 20px;
    transition: 100ms ease-in;
  }

  .contactPopUp:hover::before {
    width: 5px;
    height: 5px;
  }

  /* -------------------------------- */

  .contactPopUp .separator1,
  .contactPopUp .separator2,
  .contactPopUp .separator3 {
    position: absolute;
    top: -5px;
    left: 50%;
    width: 0%;
    height: 10px;
    margin: auto;
    background-color: var(--color-white);
    transition: 100ms 100ms ease-in;
    z-index: 3;
  }

  .contactPopUp .separator1 {
    z-index: 1;
  }

  .contactPopUp .separator2 {
    height: 6px;
    top: 0px;
  }

  .contactPopUp .separator3 {
    height: 6px;
    top: -10px;
  }

  .contactPopUp:hover .separator1 {
    width: 30%;
    left: 35%;
  }

  .contactPopUp:hover .separator2,
  .contactPopUp:hover .separator3 {
    width: 60%;
    left: 20%;
  }

  .contactPopUp .diagonal1Up,
  .contactPopUp .diagonal2Up {
    position: absolute;
    top: -4px;
    left: 50%;
    width: 0px;
    height: 5px;
    margin: auto;
    background-color: var(--color-black);
    transform: rotate(-40deg);
    transition: 100ms 100ms ease-in;
    z-index: 2;
  }

  .contactPopUp .diagonal2Up {
    transform: rotate(40deg);
  }

  .contactPopUp:hover .diagonal1Up {
    left: 33%;
    width: 15px;
  }

  .contactPopUp:hover .diagonal2Up {
    left: 63%;
    width: 15px;
  }

  .contactPopUp .lineUp {
    position: absolute;
    top: -4px;
    left: 50%;
    width: 0%;
    height: 1px;
    margin: auto;
    background-color: var(--color-black);
    transition: 100ms 100ms ease-in;
    z-index: 5;
  }

  .contactPopUp:hover .lineUp {
    left: 35%;
    width: 30%;
  }

  /* =================================== */

  .contactPopUp h2 {
    min-width: max-content;
    margin: 10px auto 0 auto;
    font-size: clamp(14px, 3vw, 20px);
    text-align: center;
    font-weight: 600;
    color: var(--color-black);
  }

  .contactPopUp .iconsContyainer {
    width: 100%;
    max-width: 70dvw;
    margin: auto;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
  }

  .contactPopUp .iconsContyainer .item {
    position: relative;
    width: 40px;
    display: flex;
    margin: auto 5px;
  }

  .contactPopUp:hover .iconsContyainer .item {
    width: auto;
  }

  .contactPopUp .iconsContyainer .item a {
    margin: auto;
    padding: 10px;
    display: flex;
    text-decoration: none;
  }

  .contactPopUp .iconsContyainer .item.email p {
    width: 0%;
    margin: 0 0 0 0;
    opacity: 0;
    color: var(--color-black);
  }
  .contactPopUp:hover .iconsContyainer .item.email p {
    width: 100%;
    margin: auto auto auto 5px;
    opacity: 1;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
  }

  @media screen and (max-width: 768px) {
    .contactPopUp {
      bottom: 0%;
    }
    .contactPopUp .iconsContyainer .item {
      width: auto;
    }

    .contactPopUp .iconsContyainer .item.email p {
      width: 100%;
      margin: auto auto auto 5px;
      opacity: 1;
      cursor: pointer;
    }
  }

  .contactPopUp .iconsContyainer .item.email::before {
    content: '';
    position: absolute;
    top: 10px;
    right: -7px;
    width: 5px;
    height: 8px;
    border: 1px solid var(--color-black);
    background-color: var(--color-white);
    border-radius: 2px;
    opacity: 0;
    z-index: 10;
  }

  .contactPopUp .iconsContyainer .item.email::after {
    content: '';
    position: absolute;
    top: 8px;
    right: -9px;
    width: 5px;
    height: 8px;
    border: 1px solid var(--color-black);
    background-color: var(--color-white);
    border-radius: 2px;
    opacity: 0;
    z-index: 5;
  }

  .contactPopUp:hover .iconsContyainer .item.email::after,
  .contactPopUp:hover .iconsContyainer .item.email::before{
    opacity: 1;
  }

  .contactPopUp:hover .iconsContyainer .item.email p.copied::before {
    content: 'copied to clipboard!';
    position: absolute;
    top: -60%;
    left: 50%;
    min-width: max-content;
    margin: auto;
    padding: 5px 10px;
    background-color: var(--color-black);
    border-radius: 200px;
    color: var(--color-white);
    transform: translate(-50%, 0%);
  }
</style>
